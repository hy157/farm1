<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Tarƒ±m Oyunu - Mobil Uyumlu</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <style>
    html, body {
      width: 100vw; height: 100vh; margin: 0; padding: 0;
      overscroll-behavior: none;
      touch-action: manipulation;
    }
    body {
      background: #4ecb36;
      font-family: 'Segoe UI', Arial, sans-serif;
      user-select: none;
    }
    #game-container {
      position: fixed; left: 0; top: 0; width: 100vw; height: 100vh;
      overflow: hidden; z-index: 1; background: transparent;
      touch-action: none;
    }
    #toolbar {
      position: absolute; bottom: 2vw; left: 0; width: 100vw; z-index: 10;
      display: flex; justify-content: center; align-items: flex-end;
      gap: 4vw; padding-bottom: 0.5rem;
      pointer-events: none;
    }
    .tool-btn {
      font-size: 7vw;
      padding: 2vw 6vw;
      border: none;
      border-radius: 2.5vw;
      cursor: pointer;
      background: #fff9;
      margin: 0;
      box-shadow: 0 2px 8px #0002;
      outline: 3px solid transparent;
      transition: outline 0.2s, background 0.18s, transform 0.18s;
      min-width: 17vw;
      min-height: 10vw;
      pointer-events: auto;
      font-weight: bold;
      letter-spacing: 0.5px;
      -webkit-tap-highlight-color: transparent;
      /* Extra for mobile feedback: */
      touch-action: manipulation;
    }
    .tool-btn.active {
      outline: 3px solid #13bb18;
      background: #baffc9;
      transform: scale(1.1);
    }
    .status-bars {
      position: absolute; top: 1vw; left: 0; width: 100vw; z-index: 20;
      display: flex; justify-content: center; gap: 3vw; pointer-events: none;
      flex-wrap: wrap;
    }
    #money-bar, #wheat-bar, #wheat-price-bar {
      background: #fff8;
      padding: 2vw 4vw 2vw 3vw;
      border-radius: 2vw;
      font-size: 5vw;
      box-shadow: 0 2px 8px #0002;
      display: flex;
      align-items: center;
      font-weight: bold;
      gap: 2vw;
      min-width: 18vw;
      min-height: 7vw;
      user-select: none;
      height: 10vw;
      pointer-events: auto;
      /* Extra mobile spacing: */
      margin-bottom: 1vw;
    }
    #wheat-price-bar {
      background: #ffe7aaee;
      border: 2px solid #ffb60066;
      margin-left: 0;
      margin-right: 0;
      cursor: pointer;
      transition: box-shadow 0.2s, background 0.2s;
      font-size: 5vw;
      min-width: 22vw;
    }
    #wheat-price-bar:active {
      box-shadow: 0 2px 16px #ffa60055;
      background: #ffefb3;
    }
    #money-bar.money-gain #money-amount { color: #09c517; transform: scale(1.15);}
    #money-bar.money-lose #money-amount { color: #d62424; transform: scale(0.9);}
    #wheat-price-bar.price-gain #wheat-price-amount { color: #1a9701; transform: scale(1.18);}
    #wheat-price-bar.price-sell #wheat-price-amount { color: #ff1b1b; transform: scale(1.25);}
    #money-amount, #wheat-amount { font-family: monospace; font-size: 5vw; transition: color 0.2s, transform 0.2s;}
    #wheat-price-amount { font-family: monospace; font-size: 5vw; color: #c38307; transition: color 0.2s, transform 0.2s;}
    #wheat-price-label { font-size: 3vw; color: #9a7e00; }
    #wheat-icon, #wheat-price-icon {
      width: 8vw; height: 8vw; object-fit: contain; margin-right: 2vw; user-select: none; pointer-events: none;
    }
    #game-area {
      position: absolute; left: 0; top: 0; width: 1920px; height: 1080px;
      cursor: default; user-select: none; z-index: 2;
      touch-action: none;
    }
    .iso-plot {
      position: absolute;
      width: 192px; height: 128px;
      transform: translate(-50%, -50%);
      pointer-events: none;
      transition: filter 0.1s;
      will-change: transform, filter, opacity;
    }
    .fall-anim { animation: fall-in 0.4s cubic-bezier(.55,1.5,.58,1) both; }
    @keyframes fall-in {
      from { opacity: 0; transform: translate(-50%, -130%) scaleY(1.2); filter: blur(2px);}
      80% { opacity: 1; transform: translate(-50%, -56%) scaleY(0.95); filter: blur(0);}
      to { opacity: 1; transform: translate(-50%, -50%) scaleY(1); filter: blur(0);}
    }
    .fly-anim { animation: fly-out 0.4s cubic-bezier(.7,-0.4,1,.57) both; z-index: 10; }
    @keyframes fly-out {
      from { opacity: 1; transform: translate(-50%, -50%) scaleY(1); filter: blur(0);}
      40% { opacity: 1; filter: blur(0.5px); transform: translate(-50%, -70%) scaleY(1.05);}
      to { opacity: 0; filter: blur(2px); transform: translate(-50%, -130%) scaleY(1.2);}
    }
    .money-float {
      position: absolute; left: 0; top: 0; pointer-events: none;
      font-size: 4vw; font-weight: bold; opacity: 1; z-index: 99;
      transition: opacity 0.15s; will-change: transform, opacity; user-select: none;
    }
    .money-gain { color: #11c90e; text-shadow: 0 1px 4px #fff8,0 0 2px #45ff42; }
    .money-lose { color: #d62424; text-shadow: 0 1px 4px #fff8,0 0 2px #ff6961; }
    /* Timer g√∂rseli mobilde daha b√ºy√ºk */
    [id^="timer-"] {
      width: 16vw !important;
      height: 6vw !important;
      font-size: 4vw !important;
      border-radius: 1vw !important;
      line-height: 6vw !important;
    }
    /* Scroll'u tamamen kaldƒ±r (iOS i√ßin) */
    ::-webkit-scrollbar { display: none; }
    /* Mobilde longpress se√ßimi, context menu, metin se√ßimi kapalƒ± */
    body, #game-area, #toolbar { -webkit-user-select: none; -webkit-touch-callout: none; }
    /* iPhone "yukarƒ± kaydƒ±rƒ±nca bar a√ßƒ±lmasƒ±nƒ±" biraz azaltƒ±r */
    body { overscroll-behavior-y: contain;}
  </style>
</head>
<body>
  <audio id="sound-coin" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfa4f88.mp3"></audio>
  <audio id="sound-pay" src="https://cdn.pixabay.com/audio/2022/03/15/audio_115bfae13d.mp3"></audio>

  <div id="game-container">
    <div id="game-area"></div>
  </div>
  <div class="status-bars">
    <div id="money-bar">ü™ô <span id="money-amount">100</span></div>
    <div id="wheat-price-bar" title="Elindeki fazla buƒüdayƒ± sat">
      <img id="wheat-price-icon" src="img/wheat.webp" alt="Buƒüday">
      <span id="wheat-price-amount">10</span>
      <span id="wheat-price-label"></span>
    </div>
    <div id="wheat-bar">
      <img id="wheat-icon" src="img/wheat.webp" alt="Buƒüday">
      <span id="wheat-amount">10</span>
    </div>
  </div>
  <div id="toolbar">
    <button id="pickaxe-btn" class="tool-btn" aria-label="Kaz (1)">‚õèÔ∏è</button>
    <button id="wheat-btn" class="tool-btn" aria-label="Ekin ek (2)">üåæ</button>
    <button id="sickle-btn" class="tool-btn" aria-label="Bi√ß (3)">üî™</button>
    <button id="remove-btn" class="tool-btn" aria-label="Sil (4)">‚ùå</button>
  </div>

<script>
// ... <Yukarƒ±daki javascript'in tamamƒ±nƒ± burada kullanabilirsin, sadece a≈üaƒüƒ±da mobil-dokunmatik i√ßin ek kodlar var>

// A≈üaƒüƒ±daki kod "responsive" oranlarƒ±, aray√ºz, dokunmatik ayarlarƒ±nƒ± optimize eder:
function updateGameAreaTransform() {
  let container = document.getElementById('game-container');
  let ww = window.innerWidth, wh = window.innerHeight;
  // Mobilde (√∂zellikle dikeyde) biraz daha fazla alan bƒ±rak
  scale = Math.min(ww / 1920, wh / 1080);
  offsetLeft = (ww - 1920 * scale) / 2;
  offsetTop = (wh - 1080 * scale) / 2;
  gameArea.style.transform = `scale(${scale})`;
  gameArea.style.left = `${offsetLeft / scale}px`;
  gameArea.style.top = `${offsetTop / scale}px`;
  gameArea.style.transformOrigin = '0 0';
}
updateGameAreaTransform();
window.addEventListener('resize', () => {
  updateGameAreaTransform();
  redrawAllPlots();
});
// iOS Safari barlar k√º√ß√ºld√ºƒü√ºnde tam ekranƒ± korumak i√ßin:
window.addEventListener('orientationchange', () => setTimeout(updateGameAreaTransform, 400));

document.addEventListener('gesturestart', function (e) { e.preventDefault(); }); // zoom'u kapat
document.addEventListener('touchmove', function (e) {
  // Tool aktifse, oyun alanƒ± dƒ±≈üƒ±na kayma engelle
  if (isPickaxe || isRemove || isWheat || isSickle) e.preventDefault();
}, { passive: false });

// Uzun basƒ±nca context men√º a√ßƒ±lmasƒ±nƒ± engelle
document.addEventListener('contextmenu', function(e) { e.preventDefault(); });

/* 
Diƒüer javascript kodlarƒ±nƒ± aynen yukarƒ±dan alƒ±p, bu dosyada kullanabilirsin.
(Aray√ºzdeki butonlar, animasyonlar, plot i≈ülemleri vs tamamen aynƒ± ≈üekilde √ßalƒ±≈üacak.)
*/

// <Buraya senin t√ºm oyunun JS kodunu yukarƒ±dan kopyala>

// --------------- 
// OYUNU Dƒ∞KEY EKSRANDA OYNATMAK i√ßin (isteƒüe baƒülƒ±):
window.addEventListener('resize', () => {
  if(window.innerWidth < window.innerHeight){
    document.body.style.flexDirection = 'column';
  }
});

// --------------- 
// OYUNU YAVA≈û TELEFONLARDA HIZLANDIRMAK i√ßin (isteƒüe baƒülƒ±):
// setInterval'ler ve animasyonlar gecikmeli ise, saniye deƒüerlerini artƒ±rabilirsin.

// --------------- 
// iOS iPad ve iPhone √∂zel ufak dokunu≈ülar i√ßin a≈üaƒüƒ±ya ek stil yazabilirsin.

// --------------- 
// OYUNU "HOME SCREEN"e EKLEYEN KULLANICILAR i√ßin manifest ve ikonlar eklenebilir (isteƒüe baƒülƒ±).

</script>
</body>
</html>
